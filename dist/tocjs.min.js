!function(t){var e=function(t,e){return t=e+". "+t},i=function(t){var e=t>0?"-"+t:"";return e};t.fn.tocjs=function(n){return n=t.extend({excludes:"toc-exclude",headings:"h2, h3",includes:"",output:".toc",min:4,tocNumber:!0,headingNumber:!0,title:"Contents",titleElement:"h2"},n),this.each(function(){var l,s,c,r,u,a,o=[0],h=!1,d=[];s=t("<div>"),c=n.headings.replace(/　/g,"").replace(/\s/g,""),r=c.split(","),r.sort(),u=n.excludes.replace(/\./g,"").replace(/\,/g," ").replace(/　/g,"").replace(/\s+/," "),includes=t.trim(n.includes),n.title&&($title=t("<"+n.titleElement+">",{class:"toc-heading",text:n.title}),s.prepend($title)),$list=t("<ul>",{class:"toc-list"}),l=includes?t(this).find(includes):t(this).find(c).not(".toc-heading"),l.each(function(){var l,s,c,p,m,f,g=t(this).prop("tagName").toLowerCase(),v=t(this).html();for(l=0;l<r.length;l++)if(g===r[l]){if(h!==!1&&h<l)return;if(h=!1,t(this).hasClass(u))return void(h=l);for(o[l]++,l!==r.length-1&&(o[l+1]=0),s=0;s<o.length;s++)0===s?m=o[s]:m+=i(o[s]);p="toc-item-"+m,c="toc-item toc-item-"+(l+1),t(this).attr("id",p),n.headingNumber&&(f=e(v,m),t(this).html(f)),n.tocNumber&&(v=e(v,m)),a=d.push('<li class="'+c+'"><a href="#'+p+'">'+v+"</a></li>")}}),a>=n.min&&($list.append(d),s.append($list),outputHtml=s.html(),t(n.output).append(outputHtml))})}}(jQuery);